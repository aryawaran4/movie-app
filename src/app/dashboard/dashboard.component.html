<app-navbar *ngIf="showNavbar"></app-navbar>

<div class="dashboard container-02 area-padding">
  <div class="dashboard-area area-full">
    <h2 class="ttl-02 txt-left txt-primary area-width area-center">TRENDING THIS WEEK</h2>
    <ngx-slick-carousel class="carousel" #slickModal="slick-carousel" [config]="slideConfig" (init)="slickInit($event)"
      (breakpoint)="breakpoint($event)" (afterChange)="afterChange($event)" (beforeChange)="beforeChange($event)">
      <div ngxSlickItem *ngFor="let trendShow of trends" class="slide">
        <div class="img-wrapper">
          <img [src]="movieService.getImageUrl(trendShow.backdrop_path, 'w1280')" alt="" width="100%">
        </div>
        <div class="slide-info">
          <div class="slide-info-area">
            <div class="genre-list">
              <div class="genre font-medium txt-02" *ngFor="let genreId of trendShow.genre_ids">
                {{ getGenreName(genreId, trendShow.media_type) }}
              </div>
            </div>
            <h3 class="ttl-02 txt-left txt-primary">{{trendShow.media_type === "movie" ? trendShow.title :
              trendShow.name}}</h3>
            <p class="txt-02 txt-primary ellipsis">{{trendShow.overview}}</p>
            <div class="slide-action-area">
              <div class="action-common">
                <p class="txt-01 txt-primary icon rating">
                  <span class="material-symbols-outlined">
                    star_rate
                  </span>
                  {{trendShow.vote_average | number : '1.1-1'}} / 10
                </p>
                <p class="txt-01 txt-primary icon person">
                  <span class="material-symbols-outlined">
                    person
                  </span>
                  {{trendShow.vote_count}}
                </p>
                <div class="icon favorite">
                  <span
                    [ngClass]="isFavorite(trendShow.id, trendShow.media_type) ? 'favorite-icon active' : 'favorite-icon'"></span>
                  <span
                    [ngClass]="isFavorite(trendShow.id, trendShow.media_type) ? 'favorite-txt remove' : 'favorite-txt add'"
                    (click)="toggleFavorite(trendShow.id, trendShow.media_type)">
                    {{ isFavorite(trendShow.id, trendShow.media_type) ? 'Remove from favorites' : 'Add to favorites' }}
                  </span>
                </div>
              </div>
              <div class="action-btn">
                <button class="primary-btn icon"><span class="material-symbols-outlined">
                    play_arrow
                  </span>
                  Watch Trailer</button>
                <button class="primary-btn outlined" (click)="navigateTo('/')">See More</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ngx-slick-carousel>
  </div>

</div>